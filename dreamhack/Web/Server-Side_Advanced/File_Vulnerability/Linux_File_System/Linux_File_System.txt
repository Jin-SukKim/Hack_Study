Linux File System :
    웹 서버는 Unix 계열의 운영체제가 많이 사용(70% 이상)되며, 그중 상당수가 Linux 운영체제를 사용하고 있습니다.

    Unix 운영체제는 "everything is a file," 즉 장치, 프로세스 등 상당수의 객체들을 파일시스템을 통해 제어할 수 있다는 특징을 가지며,
    이는 파일 업/다운로드 취약점의 중요성으로 이어집니다.

    파일은 보통 디스크 상에 위치하여 문서 등을 저장하는 보관소 역할을 하지만,
    실제 저장되지 않고 대신 가상 파일시스템에 위치하여 운영체제의 각종 기능을 제공하는 가상 파일 또한 존재합니다.

    이 주제에서는 Linux의 파일시스템과 각종 물리적 파일 및 가상 파일을 알아보고, 
    이를 파일 업/다운로드 취약점에 적용할 수 있는 방법을 다루어보도록 하겠습니다.

    밑에서 리눅스 파일시스템에 존재하는 디렉터리와 파일들을 알아봅시다.

1) 로그 및 데이터 파일 :
    디렉터리                    설명

    /var/www                웹 문서 및 기타 웹 서버에서 사용되는 파일을 저장합니다.

    /var/lib                시스템의 각종 서비스에서 자료를 저장할 때 사용합니다. 데이터베이스 등이 이에 속합니다.

    /var/lib/mysql          MySQL 데이터베이스의 데이터가 저장됩니다.

    /var/lib/pgsql 또는     PostgreSQL 데이터베이스의 데이터가 저장됩니다.
    /var/lib/postgresql     

    /var/log                시스템 서비스 등의 로그를 저장할 때 사용합니다. 웹 서버 로그가 보통 여기에 위치합니다.

    /var/cache              캐시 데이터를 저장합니다. 일반적으로 삭제되어도 재생성이 가능합니다.

    /media                  제거 가능한 매체(USB 플래시 메모리, 기타 이동 저장장치 등)를 마운트할 떄 주로 사용됩니다.

    /mnt                    기타 파일시스템을 임시로 마운트하는 용도로 주로 사용됩니다.


2) 설정 파일 :
    디렉터리                    설명

    /etc                    운영체제 초기 부팅 시 필요한 최소한의 명령어를 구현하는 프로그램 파일을 저장합니다.

    /etc/apache2 또는       Apache Web Server의 설정 정보를 저장합니다.
    /etc/httpd

    /etc/nginx              Nginx 웹 서버의 설정 정보를 저장합니다.

    /etc/mysql              MySQL 데이터베이스 서버의 설정 정보를 저장합니다.

    /opt/etc                추가적으로 설치된 프로그램의 설정 정보를 저장합니다. 존재하지 않을 수도 있습니다.


    파일                    설명

    /etc/mysql/my.cnf           MySQL 데이터베이스 서버의 주 설정파일입니다.

    /etc/passwd, /etc/group     사용자 및 그룹 정보를 저장합니다.

    /etc/shadow, /etc/gshadow   사용자 및 그룹의 인증 비밀번호를 암호화하여 저장합니다. 일반적으로 관리자 및 권한 있는 프로그램만이 접근할 수 있습니다.

    /etc/hostname               현재 시스템의 호스트네임을 저장합니다.

    /etc/hosts                  호스트네임의 실주소를 탐색할 때 사용되는 정적 순람표입니다.

    /etc/fstab                  현재 시스템에 등록할 파일시스템의 목록을 저장합니다.

3) 프로그램 및 라이브러리
    디렉터리                        설명

    /bin, /sbin                 운영체제 초기 부팅 시 필요한 최소한의 명령어를 구현하는 프로그램 파일을 저장합니다.

    /boot                       커널이나 부트로더 옵션 등 부팅에 필요한 파일을 저장합니다.

    /lib, /lib64, /libx32, ...  운영체제 초기 부팅 시 필요한 최소한의 라이브러리 파일을 저장합니다.

    /opt                        추가적인 프로그램을 저장합니다.

    /usr/bin                    각종 명령어 및 프로그램 파일을 저장합니다.

    /usr/sbin                   시스템 관리자가 주로 사용하는 각종 명령어 및 프로그램 파일을 저장합니다.

    /usr/lib, /usr/lib64,       시스템에서 공유되는 라이브러리 파일을 저장합니다.
    /usr/libx32, ...  

    /usr/share                  기타 시스템에서 공유되는 파일을 저장합니다.

4) 장치 및 가상 파일
    디렉터리                        설명

    /dev                        각종 디스크 및 장치 파일을 제공합니다.

    /sys                        하드웨어(주변기기 등) 및 플랫폼에 접근할 수 있도록 합니다.

    /proc                       프로세스 및 시스템 정보를 제공하는 가상 파일시스템이 위치합니다.

    /proc/sys                   운영체제의 동작을 제어할 수 있는 각종 파라미터가 위치합니다.

    /proc/self/net              운영체제 네트워크 계층의 다양한 정보를 제공합니다.
    (또는 /proc/net)


    파일                                    설명

    /dev/null, /dev/zero, /dev/full,    실제 물리적인 장치를 나타내지는 않지만 자주 사용되는 특수 파일입니다.
    /dev/random, /dev/urandom

    /dev/pts                            유사터미널(pseudoterminal) TTY 장치가 위치한 디렉터리로 SSH 터미널 또는 터미널 에뮬레이터 등에서 사용됩니다.

    /dev/stdin → /proc/self/fd/0        파일 디스크립터 0, 즉 표준 입력(standard input)에 사용된 파일을 나타내는 심볼릭 링크입니다.

    /dev/stdout → /proc/self/fd/1       파일 디스크립터 1, 즉 표준 출력(standard output)에 사용된 파일을 나타내는 심볼릭 링크입니다.

    /dev/stderr → /proc/self/fd/2       파일 디스크립터 2, 즉 표준 오류 출력(standard error)에 사용된 파일을 나타내는 심볼릭 링크입니다.

5) 임시 파일
    디렉터리                    설명

    /tmp                    임시 파일을 저장합니다. 시스템 재시작(재부팅) 시 저장한 파일이 삭제될 수 있으며, 용량에 상당한 제한이 있을 수 있습니다. 디스크 또는 메모리 상(tmpfs)에 존재할 수 있습니다.

    /var/tmp                임시 파일을 저장합니다. 시스템 재시작(재부팅)시에도 일반적으로 유지됩니다.

    /run (/var/run)         부팅 후 생성된 각종 런타임 데이터 및 IPC 소켓 등이 이곳에 위치합니다. 일반적으로 디스크에 저장되지 않고 메모리 상에서만 존재합니다(tmpfs).

    /var/run/postgresql     PostgreSQL 소켓 등이 위치합니다.

    /var/run/mysql          MySQL 소켓 등이 위치합니다.

    /dev/shm                Linux shm_open(3) C 라이브러리 함수에서 사용됩니다. 일반적으로 디스크에 저장되지 않고 메모리 상에서만 존재합니다(tmpfs). 시스템에 따라 존재하지 않을 수 있습니다.





























