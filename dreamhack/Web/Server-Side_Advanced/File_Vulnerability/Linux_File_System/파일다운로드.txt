파일 다운로드 시 공격 지점 :
    Server-side Basic 강의의 File Download 주제에서 /etc/passwd와 같은 시스템 파일을 잠깐 언급했었습니다.

    /etc/passwd는 Unix 계열 시스템에 등록된 사용자 정보를 저장하는 파일로, 웹 서버 공격 시연에서 공격 성공을 보여주기 위해 자주 사용됩니다.

    밑에서 파일 다운로드 취약점에서 사용할 수 있는 Linux 운영체제의 파일들을 알아봅시다.

1) 시스템 가상 파일
    다음은 사용자 권한에서 일반적으로 접근할 수 있는 시스템 가상 파일 및 심볼릭 링크를 정리한 것입니다.

        파일                        설명

    /proc/cpuinfo               시스템 CPU 정보를 조회할 수 있습니다.

    /proc/uptime                시스템의 구동 시간을 조회할 수 있습니다.

    /proc/version               시스템 커널 버전 정보를 조회할 수 있습니다.

    /proc/self/net/arp          내부망에 연결된 호스트들의 정보를 조회할 수 있습니다. 각 IP 주소별 MAC 주소를 출력합니다.
    (또는 /proc/net/arp)

    /proc/self/net/route        게이트웨이 등 기본 라우팅 테이블을 조회할 수 있습니다.
    (또는 /proc/net/route)

    /proc/self/net/tcp          현재 시스템상에 존재하는 TCP 연결 정보를 조회할 수 있습니다.
    (또는 /proc/net/tcp)

    /proc/self/fd/<FD>          파일 디스크립터 <FD> 가 가리키는 파일을 나타내는 심볼릭 링크(symbolic link)입니다.
    (또는 /dev/fd/<FD>)         현재 열린 파일을 조회하고 읽거나 쓸 수 있습니다.
    → (FD에 해당하는 파일)

    /proc/self/cmdline,         각각 현재 프로세스의 명령줄 및 환경 변수를 가져옵니다.
    /proc/self/environ          Docker 등을 사용하는 웹 앱의 경우 암호키나 비밀번호(secret)를 환경변수로 저장하는 경우가 많습니다. 따라서 환경변수를 유출하면 민감 정보를 획득할 수 있게 됩니다.

    /proc/self/exe              현재 프로세스의 실행 파일을 가리키는 심볼릭 링크입니다.
    → (현재 실행 파일)  

    /proc/self/cwd              현재 디렉터리(current working directory)를 가리키는 심볼릭 링크입니다.
    → (현재 디렉터리)

    /proc/self/maps             현재 프로세스의 메모리 매핑과 사용 중인 동적 라이브러리의 파일명을 불러옵니다.

2) 설정 파일 :
    다음은 사용자 권한에서 일반적으로 접근할 수 있는 파일을 정리한 것입니다.
    ~ 는 사용자 프로필 디렉터리를 축약한 것으로 /home/admin 등이 있습니다.
    프로필 및 SSH 키 등은 관리자가 로그온하는 계정과 웹 서버의 계정이 동일할 때에만 유용합니다.

        파일                        설명

    ~/.bash_history,            사용자가 입력한 쉘 명령 및 및 인터프리터 명령 기록을 저장합니다.
    ~/.zsh_history,
    ~/.python_history, ...

    ~/.ssh/id_rsa,              사용자의 SSH 비밀키가 위치합니다.
    ~/.ssh/id_ed25519, ...

    ~/.gnupg                    GNU Privacy Guard 설정 파일 및 비밀키 등이 위치합니다.

    ~/.netrc                    FTP 서버 연결 비밀번호 등을 설정하는 파일입니다.

    ~/.viminfo                  Vim 에디터로 편집한 파일 목록 등이 저장됩니다.

3) 로그 파일
    다음은 서버에서 사용자 접속 기록 등을 저장하는 로그 파일의 위치를 저장한 것입니다.

    파일 및 디렉터리                    설명

    /var/log/apache2                Apache Web Server의 로그가 저장됩니다. 웹 서비스 접속 기록은 access.log 에 저장되며, 에러 기록은 error.log 에 저장됩니다.
    또는 /var/log/httpd

    /var/log/nginx                  Nginx 웹 서버의 로그가 저장됩니다.

    /var/log/php-fpm                FastCGI 기반 PHP 로그가 저장됩니다.

    /var/log/journal                systemd 기반 시스템의 로그가 저장되는 디렉터리입니다.

    /var/log/wtmp,                  마지막 접속 날짜 등 사용자 접속 기록이 저장됩니다.
    /var/log/btmp, 
    /var/log/lastlog

















